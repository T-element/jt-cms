/* empty css             *//* empty css                  *//* empty css                 *//* empty css                *//* empty css                   */import{j as P,_ as y,r as p,a as F,c as V,b as o,w as s,E as $,d as x,o as h,e as j,f as q,g as L,h as N,i as T,k as l,l as U,m as k,n as v,p as z,q as M,s as O,u as A,t as E}from"./index-DUPduILs.js";/* empty css                 */function J(_){return P.post({url:"/login",data:{..._}})}const Z={class:"loginBox"},D={class:"tabTitle"},G={class:"tabTitle"},H={class:"codeItem"},K={__name:"loginBox",setup(_,{expose:f}){const r=p(),n=p({name:localStorage.getItem("name")??"jtdemo",password:localStorage.getItem("password")??"123456"});function u(t,e,a){e===""?a(new Error("请输入账号信息")):/^[a-zA-Z0-9]{6,20}$/.test(e)?a():a(new Error("账号必须是6到20个字母或数字"))}function g(t,e,a){e===""?a(new Error("请输入密码")):/^\d{3,}$/.test(e)?a():a(new Error("密码必须是3位以上的数字"))}const d=F({name:[{required:!0,validator:u,trigger:"blur"}],password:[{required:!0,validator:g,trigger:"blur"}]});return f({accountValidate:()=>r.value.validate,getLoginInfo:()=>({...n.value})}),(t,e)=>{const a=x("UserFilled"),i=U,c=T,m=N,b=L,I=q,B=x("Iphone"),R=k,S=j,C=$;return h(),V("div",Z,[o(C,{"body-style":{padding:0}},{default:s(()=>[o(S,{type:"border-card",stretch:""},{default:s(()=>[o(I,null,{label:s(()=>[l("div",D,[o(i,null,{default:s(()=>[o(a)]),_:1}),e[2]||(e[2]=l("span",{class:"text"},"账号登录",-1))])]),default:s(()=>[o(b,{ref_key:"accountFormRef",ref:r,model:n.value,rules:d,"label-width":"60","status-icon":"",size:"large"},{default:s(()=>[o(m,{label:"帐号",prop:"name"},{default:s(()=>[o(c,{modelValue:n.value.name,"onUpdate:modelValue":e[0]||(e[0]=w=>n.value.name=w)},null,8,["modelValue"])]),_:1}),o(m,{label:"密码",prop:"password"},{default:s(()=>[o(c,{type:"password","show-password":"",modelValue:n.value.password,"onUpdate:modelValue":e[1]||(e[1]=w=>n.value.password=w)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),o(I,null,{label:s(()=>[l("div",G,[o(i,null,{default:s(()=>[o(B)]),_:1}),e[3]||(e[3]=l("span",{class:"text"},"手机登录",-1))])]),default:s(()=>[o(b,{"label-width":"60","status-icon":"",size:"large"},{default:s(()=>[o(m,{label:"手机号",prop:"phoneNumber"},{default:s(()=>[o(c)]),_:1}),o(m,{label:"验证码",prop:"code"},{default:s(()=>[l("div",H,[o(c),o(R,{class:"btn",type:"primary"},{default:s(()=>e[4]||(e[4]=[v("获取验证码")])),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}},Q=y(K,[["__scopeId","data-v-039fe58b"]]),W={class:"login"},X={class:"loginPanel"},Y={class:"pwdOperateBar"},ee={class:"rmbPwd"},oe={class:"forgetPwd"},te={__name:"login",setup(_){const f=A(),r=p(JSON.parse(localStorage.getItem("isRemPwd"))??!1);z(r,d=>{localStorage.setItem("isRemPwd",d)});function n(){location.reload()}const u=p();function g(){u.value.accountValidate()(d=>{if(d){const t=u.value.getLoginInfo();t.name==="jtdemo"&&(t.name="coderwhy"),J({...t}).then(e=>{t.name==="coderwhy"&&(t.name="jtdemo"),r.value?(console.log(t),localStorage.setItem("name",t.name),localStorage.setItem("password",t.password)):(localStorage.removeItem("name"),localStorage.removeItem("password")),localStorage.setItem("login/token",e.data.data.token),localStorage.setItem("roleId",e.data.data.id),f.push("/main")}).catch(e=>{console.log(e),E({message:e.response.data,type:"error",customClass:"errorMessage",offset:40})})}else E({message:"请正确填写帐号或者密码",type:"error",customClass:"errorMessage",offset:40})})}return(d,t)=>{const e=M,a=O,i=k;return h(),V("div",W,[l("div",X,[t[3]||(t[3]=l("h1",{class:"title"},"后台管理系统",-1)),o(Q,{ref_key:"loginBoxRef",ref:u},null,512),l("div",Y,[l("div",ee,[o(e,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=c=>r.value=c),label:"记住密码"},null,8,["modelValue"])]),l("div",oe,[o(a,{type:"primary",onClick:n},{default:s(()=>t[1]||(t[1]=[v("忘记密码")])),_:1})])]),o(i,{type:"primary",size:"large",onClick:g},{default:s(()=>t[2]||(t[2]=[v("立即登录")])),_:1})])])}}},ce=y(te,[["__scopeId","data-v-47d4fa60"]]);export{ce as default};
